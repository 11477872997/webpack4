# 项目使用的技术栈
- webpck4 + vue2.6
- NutUI 移动端u框架
- Element  pc端框架
### 项目目录解释



## 生产环境项目安装的命令
用于开发的配置文件，配置热更新、跨域配置、端口设置等  
（"dev": "webpack --mode development"）

用于生产的配置文件，配置 js 压缩、代码拆分等  
（"build": "webpack --mode production"）

注意这里已经本地已经安装过淘宝镜像 所以所有命令都是cnpm 如果没安装淘宝镜像本地的话 请把cnpm 改为 npm 下载
1.初始化项目
> npm init -y

2.安装webpck 和 webpack-cli
> cnpm install webpack@4 webpack-cli@3 --save-dev

3.修改 package.json
```
"scripts": {
    "dev": "webpack --mode development",
    "build": "webpack ,
  },
```
> npm run bulid 
如果项目出现默认打包 dist 文件夹证明打包成功  
注意： 记得先在项目中先创建src 文件夹 再新建一个index.js 不然会报错

测试成功后：
在项目根目录创建 webpack.config.js 文件
文件夹代码如下：
``` //入口默认是 src中的 index.js 文件，我们这里需要修改一下，配置完之后 npm run build 运行一下，我们的入口文件就修改成了main.js文件了
const path = require('path')  //引入path
module.exports = {
    entry: './src/main.js', //入口文件
    output: {  //出口文件
        publicPath: '/',   //资源引入路径
        path:path.resolve(__dirname, 'dist'),   //输出文件 把项目打包成的 路径 以及文件夹名称
        filename: 'index.js',   //把我们的项目主文件打包后生产的js文件
    }
 ```

4. 这个插件主要做先删除之前打包的dist 再次替换为最新打包dist文件
> cnpm install clean-webpack-plugin --save-dev
目前 webpack.config.js
```
const path = require('path')  //引入path
const { CleanWebpackPlugin } = require('clean-webpack-plugin')  // 引入我们下载的插件
module.exports = {
    entry: './src/main.js', //入口文件
    output: {  //出口文件
        publicPath: '/',   //资源引入路径
        path:path.resolve(__dirname, 'dist'),   //输出文件 把项目打包成的 路径 以及文件夹名称
        filename: 'index.js',   //把我们的项目主文件打包后生产的js文件
    },
    plugins: [
        new CleanWebpackPlugin() //默认情况下，此插件将删除 webpack output.path目录中的所有文件，以及每次成功重建后所有未使用的 webpack 资产。
    ]
}
```
注意!!!如果安装的 clean-webpack-plugin 是 3.0 版本的，配置要更改为：
> const { CleanWebpackPlugin } = require('clean-webpack-plugin')

5.现代 Javascript 主要是用 ES6 编写的。但并非每个浏览器都知道如何处理 ES6。 我们需要某种转换，这个转换步骤称为 transpiling(转译)。transpiling(转译) 是指采用 ES6 语法，转译为旧浏览器可以理解的行为。
Webpack 不知道如何进行转换但是有 loader(加载器) ：将它们视为转译器。
babel-loader 是一个 webpack 的 loader(加载器)，用于将 ES6 及以上版本转译至 ES5
要开始使用 loader ，我们需要安装一堆依赖项

> cnpm i @babel/core babel-loader @babel/preset-env @babel/plugin-transform-runtime --save-dev
> cnpm i @babel/polyfill @babel/runtime
> cnpm install --save core-js@3

安装完后在项目根目录创建 .babelrc 文件
文件夹代码如下：
```
{
    "presets": [
      [
        "@babel/preset-env",
        {
          "useBuiltIns": "usage",
          "corejs": 3
        }
      ]
    ],
    "plugins": ["@babel/plugin-transform-runtime"]
}
 
```
目前 webpack.config.js
```
const path = require('path')  //引入path
const { CleanWebpackPlugin } = require('clean-webpack-plugin')  // 引入我们下载的插件
module.exports = {
    entry: './src/main.js', //入口文件
    output: {  //出口文件
        publicPath: '/',   //资源引入路径
        path:path.resolve(__dirname, 'dist'),   //输出文件 把项目打包成的 路径 以及文件夹名称
        filename: 'index.js',   //把我们的项目主文件打包后生产的js文件
    },
    plugins: [
        new CleanWebpackPlugin() //默认情况下，此插件将删除 webpack output.path目录中的所有文件，以及每次成功重建后所有未使用的 webpack 资产。
    ],
    module: {
        rules: [
            {
            test: /\.js$/, // 使用正则来匹配 js 文件
            exclude: /node_modules/, // 排除依赖包文件夹
            use: {
                loader: 'babel-loader' // 使用 babel-loader
            }
            }
        ]
    }
}
```
6 安装自动生成 HTML 文件的插件
> cnpm install html-webpack-plugin --save-dev

目前 webpack.config.js
```
const path = require('path')  //引入path
const { CleanWebpackPlugin } = require('clean-webpack-plugin')  // 引入我们下载的插件
const HtmlWebpackPlugin = require('html-webpack-plugin')  // 引入自动生成HTML的插件
module.exports = {
    entry: './src/main.js', //入口文件
    output: {  //出口文件
        publicPath: '/',   //资源引入路径
        path:path.resolve(__dirname, 'dist'),   //输出文件 把项目打包成的 路径 以及文件夹名称
        filename: 'index.js',   //把我们的项目主文件打包后生产的js文件
    },
    plugins: [
        new CleanWebpackPlugin(), //默认情况下，此插件将删除 webpack output.path目录中的所有文件，以及每次成功重建后所有未使用的 webpack 资产。
            new HtmlWebpackPlugin({ //使用我们的自动生成HTML插件，并对其相应的参数进行设置
        title: 'webpack搭建VUE项目',
        minify:{
            removeComments: true, //是否删除HTML中的注释
            collapseWhitespace: true, //是否删除HTML中多余的空格
            minifyCSS: true //是否要压缩我们的css文件
        },
        template: './public/index.html', //告诉我们的webpack打包的时候用哪一个作为模版文件生成HTML结构
        filename:  'index.html', //要生成什么名字的文件
    })
    ],
    module: {
        rules: [
            {
            test: /\.js$/, // 使用正则来匹配 js 文件
            exclude: /node_modules/, // 排除依赖包文件夹
            use: {
                loader: 'babel-loader' // 使用 babel-loader
            }
            }
        ]
    }
}
```

注意记得把Html标题改为
在根目录创建 public 文件夹 再创建 index.html代码为：
```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= htmlWebpackPlugin.options.title %></title>
</head>
<body>
    <div id="app"></div>
</body>
</html>
```
7. 为了让项目跑起来，我们需要启用一个本地服务器 
> cnpm i webpack-dev-server --save-dev

在package.json 修改
```
  "scripts": {
    "dev": "webpack --mode development",
    "build": "webpack --mode production",
    "start": "webpack-dev-server --open",
    "test": "echo \"Error: no test specified\" && exit 1"
  },`
```
目前 webpack.config.js
```
// 这个文件的主要功能是配置一些东西
 
//配置一下入口,出口文件，入口默认是 src中的 index.js 文件，我们这里需要修改一下，配置完之后 npm run build 运行一下，我们的入口文件就修改成了main.js文件了
const path = require('path')  //引入path
const { CleanWebpackPlugin } = require('clean-webpack-plugin')  // 引入我们下载的插件
const HtmlWebpackPlugin = require('html-webpack-plugin')  // 引入自动生成HTML的插件
const webpack = require('webpack') //引入webpack
module.exports = {
    entry: './src/main.js', //入口文件
    output: {  //出口文件
        publicPath: '/',   //资源引入路径
        path:path.resolve(__dirname, 'dist'),   //输出文件 把项目打包成的 路径 以及文件夹名称
        filename: 'index.js',   //把我们的项目主文件打包后生产的js文件
    },
    plugins: [ // plugins插件
        new CleanWebpackPlugin(),//默认情况下，此插件将删除 webpack output.path目录中的所有文件，以及每次成功重建后所有未使用的 webpack 资产。
        new HtmlWebpackPlugin({ //使用我们的自动生成HTML插件，并对其相应的参数进行设置
            title: 'webpack搭建VUE项目',
            minify:{
                removeComments: true, //是否删除HTML中的注释
                collapseWhitespace: true, //是否删除HTML中多余的空格
                minifyCSS: true //是否要压缩我们的css文件
            },
            template: './public/index.html', //告诉我们的webpack打包的时候用哪一个作为模版文件生成HTML结构
            filename:  'index.html', //要生成什么名字的文件
        }),
        new webpack.HotModuleReplacementPlugin(), // 热部署模块
        new webpack.NamedModulesPlugin()
    ],
 
    mode: 'development', // 将模式设置为开发模式
    devtool: 'source-map', //开启调试
    devServer: {  //对服务器进行相关配置
        contentBase: path.join(__dirname, 'dist'),
        port: 8000, // 本地服务器端口号
        hot: true, // 热重载
        overlay: true, // 如果代码出错，会在浏览器页面弹出“浮动层”。类似于 vue-cli 等脚手架
        proxy: {   //需要代理去注销
          // 跨域代理转发
          //'/comments': {
           // target: 'https://m.weibo.cn',
           // changeOrigin: true,
           // logLevel: 'debug',
           // headers: {
           //   Cookie: ''
           // }
          }
        },
        historyApiFallback: {
          // HTML5 history模式
          rewrites: [{ from: /.*/, to: '/index.html' }]
        }
    },
 
    //配置 loader(加载器)，用于将 ES6 及以上版本转译至 ES5
    module: {
        rules: [
          {
            test: /\.js$/, // 使用正则来匹配 js 文件
            exclude: /node_modules/, // 排除依赖包文件夹
            use: {
              loader: 'babel-loader' // 使用 babel-loader
            }
          }
        ]
      }
} 
```
8. 在根目录创建一个.gitigonre文件来指定 git 忽略的文件，所有 git 操作均不会对其生效

gitigonre 代码下
```
.DS_Store
node_modules
/dist
```
9.在根目录创建一个..browserslistrc 文件夹，用来处理css文件对各个浏览器的兼容问题，会添加的相应 CSS 浏览器前缀。

.browserslistrc 代码如下
```
  > 1%,
  last 2 version,
  not ie <= 8

```
解释
```
#所支持的浏览器版本
>1% # 全球使用情况统计选择的浏览器版本
last 2 version # 每个浏览器的最后两个版本
not ie <= 8 # 排除小于 ie8 以下的浏览器
```
9. 开始安装vue 
> cnpm install vue --save

10 .安装完成之后，我们需要配置一下webpack搭建VUE项目所必需要配置的
 vue + vue-router + vue-loader + vue-template-compiler 项目配置
> cnpm install vue vue-router vue-loader vue-template-compiler --save-dev

目前 webpack.config.js
```
// 这个文件的主要功能是配置一些东西
 
//配置一下入口,出口文件，入口默认是 src中的 index.js 文件，我们这里需要修改一下，配置完之后 npm run build 运行一下，我们的入口文件就修改成了main.js文件了
const path = require('path')  //引入path
const { CleanWebpackPlugin } = require('clean-webpack-plugin')  // 引入我们下载的插件
const HtmlWebpackPlugin = require('html-webpack-plugin')  // 引入自动生成HTML的插件
const webpack = require('webpack') //引入webpack
const VueLoaderPlugin = require('vue-loader/lib/plugin') // 引入下载完的vue-loader
module.exports = {
    entry: './src/main.js', //入口文件
    output: {  //出口文件
        publicPath: '/',   //资源引入路径
        path:path.resolve(__dirname, 'dist'),   //输出文件 把项目打包成的 路径 以及文件夹名称
        filename: 'index.js',   //把我们的项目主文件打包后生产的js文件
    },
    plugins: [ // plugins插件Q
        new CleanWebpackPlugin(),//默认情况下，此插件将删除 webpack output.path目录中的所有文件，以及每次成功重建后所有未使用的 webpack 资产。
        new HtmlWebpackPlugin({ //使用我们的自动生成HTML插件，并对其相应的参数进行设置
            title: 'webpack搭建VUE项目',
            minify:{
                removeComments: true, //是否删除HTML中的注释
                collapseWhitespace: true, //是否删除HTML中多余的空格
                minifyCSS: true //是否要压缩我们的css文件
            },
            template: './public/index.html', //告诉我们的webpack打包的时候用哪一个作为模版文件生成HTML结构
            filename:  'index.html', //要生成什么名字的文件
        }),
        new VueLoaderPlugin(),
        new webpack.HotModuleReplacementPlugin(), // 热部署模块
        new webpack.NamedModulesPlugin()
    ],
 
    mode: 'development', // 将模式设置为开发模式
    devtool: 'source-map', //开启调试
    devServer: {  //对服务器进行相关配置
        contentBase: path.join(__dirname, 'dist'),
        port: 8000, // 本地服务器端口号
        hot: true, // 热重载
        overlay: true, // 如果代码出错，会在浏览器页面弹出“浮动层”。类似于 vue-cli 等脚手架
         proxy: {   //需要代理去注销
          // 跨域代理转发
          //'/comments': {
           // target: 'https://m.weibo.cn',
           // changeOrigin: true,
           // logLevel: 'debug',
           // headers: {
           //   Cookie: ''
           // }
        },
        historyApiFallback: {
          // HTML5 history模式
          rewrites: [{ from: /.*/, to: '/index.html' }]
        }
    },
 
    //配置 loader(加载器)，用于将 ES6 及以上版本转译至 ES5
    module: {
        rules: [
          {
            test: /\.js$/, // 使用正则来匹配 js 文件
            exclude: /node_modules/, // 排除依赖包文件夹
            use: {
              loader: 'babel-loader' // 使用 babel-loader
            }
          },
          {
            test: /\.vue$/,
            loader: 'vue-loader'
          }
        ]
      }
} 
```
在src文件中创建 App.vue 代码如下：
```
<template>
    <div>
        <router-view>
        </router-view>
    </div>
</template>
```
在src文件中创建router文件夹 ->再创建 index.js 代码如下：

```
import Vue from 'vue'
import VueRouter from 'vue-router'
import Home from '../views/Home.vue'
Vue.use(VueRouter)
const routes = [
    {
        path: '/',
        name: 'home',
        component: Home
    }
]
let router = new VueRouter({
    routes
})
export default router
```
在 src 文件夹中创建 views 文件夹 再创建 Home.vue 代码如下：
```
<template>
    <div>18822起飞</div>
</template>
```
src main.js 代码如下：
```
import Vue from 'vue'
import App from './App.vue'
import router from './router/index'
new Vue({
    router,
    render: h => h(App)
}).$mount('#app')
```
##### 最后完整项目目录如下
> public -> index.html  
>src
>> assets 
>> components  
>> router -> index.js   
>> views  -> Home.vue  
>> App.vue  
>> mian.js

> .babelrc  
> .gitigonre  
> .browserslistrc  
> package.json  
> webpack.config.js


### 项目启动命令
* npm run strat
### 项目打包上线环境命令
* npm run bulid






















